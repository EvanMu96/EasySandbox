Compiling klibc from source:

To checkout the code:

  git clone http://git.kernel.org/pub/scm/libs/klibc/klibc.git

In klibc directory, ln -s linux /usr/src/linux-source-3.2.0

[or whatever the linux source directory happens to be]

In klibc/usr/include:
  ln -s /usr/include/linux
  ln -s /usr/include/asm-generic
  ln -s /usr/include/x86_64-linux-gnu/asm

Last ln -s above should reflect whatever arch you're on.

Modify scripts/Kbuild.install as follows:

diff --git a/scripts/Kbuild.install b/scripts/Kbuild.install
index 78c30aa..7e76e40 100644
--- a/scripts/Kbuild.install
+++ b/scripts/Kbuild.install
@@ -95,7 +95,7 @@ header:
 	$(Q)mkdir -p $(INSTALLROOT)$(INSTALLDIR)/$(KCROSS)include
 	$(Q)mkdir -p $(INSTALLROOT)$(INSTALLDIR)/$(KCROSS)lib
 	$(Q)mkdir -p $(INSTALLROOT)$(INSTALLDIR)/$(KCROSS)bin
-	$(Q)$(MAKE) -C $(KLIBCKERNELSRC) ARCH=$(KLIBCARCH) INSTALL_HDR_PATH=$(INSTALLROOT)$(INSTALLDIR)/$(KCROSS) headers_install
+	#$(Q)$(MAKE) -C $(KLIBCKERNELSRC) ARCH=$(KLIBCARCH) INSTALL_HDR_PATH=$(INSTALLROOT)$(INSTALLDIR)/$(KCROSS) headers_install
 	$(Q)cp -rf usr/include/. $(INSTALLROOT)$(INSTALLDIR)/$(KCROSS)include/.
 	$(Q)chmod -R a+rX $(INSTALLROOT)$(INSTALLDIR)/$(KCROSS)include
 	$(Q)$(install-data) $(srctree)/klcc/klcc.1 $(INSTALLROOT)$(mandir)/man1/$(KCROSS)klcc.1

To build, run "make"

To install

  make V=1 prefix='' INSTALLROOT=/home/dhovemey/linux/klibc install

where INSTALLROOT is the directory you want to install in.

Add the "bin" subdirectory of the installation directory to pick up
the klcc command to use to compile and link programs against klibc.
